<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Form Đăng ký</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    .form-group {
      margin-bottom: 12px;
    }
    label {
      display: block;
      margin-bottom: 4px;
    }
    input, textarea, select {
      padding: 6px;
      width: 250px;
    }
    textarea {
      width: 400px;
      height: 100px;
    }
    .required {
      background-color: #d0f0d0; /* nền xanh nhạt */
    }
    .error {
      color: red;
      font-size: 13px;
    }
  </style>
</head>
<body>
  <h2>Form Đăng ký</h2>
  <form id="registerForm">
    <div class="form-group">
      <label for="fullname">Họ và tên *</label>
      <input type="text" id="fullname" class="required">
      <div id="error-fullname" class="error"></div>
    </div>

    <div class="form-group">
      <label for="address">Địa chỉ</label>
      <input type="text" id="address">
    </div>

    <div class="form-group">
      <label>Giới tính *</label>
      <select id="gender" class="required">
        <option value="">--Chọn--</option>
        <option value="Nam">Nam</option>
        <option value="Nữ">Nữ</option>
      </select>
      <div id="error-gender" class="error"></div>
    </div>

    <div class="form-group">
      <label for="dob">Ngày sinh (dd/mm/yyyy) *</label>
      <input type="text" id="dob" class="required" maxlength="10" placeholder="dd/mm/yyyy">
      <div id="error-dob" class="error"></div>
    </div>

    <div class="form-group">
      <label for="email">Email *</label>
      <input type="text" id="email" class="required">
      <div id="error-email" class="error"></div>
    </div>

    <div class="form-group">
      <label for="phone">Điện thoại</label>
      <input type="text" id="phone">
    </div>

    <div class="form-group">
      <label for="username">Username *</label>
      <input type="text" id="username" class="required">
      <div id="error-username" class="error"></div>
    </div>

    <div class="form-group">
      <label for="password">Mật khẩu *</label>
      <input type="password" id="password" class="required">
      <div id="error-password" class="error"></div>
    </div>

    <div class="form-group">
      <label for="repassword">Gõ lại mật khẩu *</label>
      <input type="password" id="repassword" class="required">
      <div id="error-repassword" class="error"></div>
    </div>

    <div class="form-group">
      <label for="note">Ghi chú</label>
      <textarea id="note"></textarea>
    </div>

    <button type="submit">Chấp nhận</button>
  </form>

  <script>
    // focus vào họ tên khi load
    document.getElementById("fullname").focus();

    // Enter -> sang ô kế tiếp
    const inputs = document.querySelectorAll("input, select, textarea");
    inputs.forEach((input, i) => {
      input.addEventListener("keydown", e => {
        if (e.key === "Enter") {
          e.preventDefault();
          if (i + 1 < inputs.length) inputs[i + 1].focus();
        }
      });
    });

    // Chuẩn hóa họ tên
    document.getElementById("fullname").addEventListener("blur", function () {
      let val = this.value.trim().replace(/\s+/g, " ");
      val = val.split(" ").map(w => w.charAt(0).toUpperCase() + w.slice(1).toLowerCase()).join(" ");
      this.value = val;
    });

    // Kiểm tra email
    document.getElementById("email").addEventListener("blur", function () {
      const emailPattern = /^[a-zA-Z0-9]+(\.[a-zA-Z0-9]+)*@[a-zA-Z0-9]+(\.[a-zA-Z0-9]+)+$/;
      const error = document.getElementById("error-email");
      if (!emailPattern.test(this.value)) {
        error.textContent = "Email không hợp lệ";
      } else {
        error.textContent = "";
      }
    });

    // Ngày sinh tự động thêm "/"
    document.getElementById("dob").addEventListener("input", function () {
      let val = this.value.replace(/\D/g, "");
      if (val.length >= 2 && val.length < 4) val = val.slice(0, 2) + "/" + val.slice(2);
      else if (val.length >= 4) val = val.slice(0, 2) + "/" + val.slice(2, 4) + "/" + val.slice(4, 8);
      this.value = val;
    });

    // Kiểm tra mật khẩu gõ lại
    document.getElementById("repassword").addEventListener("blur", function () {
      const pass = document.getElementById("password").value;
      const error = document.getElementById("error-repassword");
      if (this.value !== pass) {
        error.textContent = "Mật khẩu gõ lại không đúng";
      } else {
        error.textContent = "";
      }
    });

    // Submit form
    document.getElementById("registerForm").addEventListener("submit", function (e) {
      e.preventDefault();
      let valid = true;
      document.querySelectorAll(".required").forEach(input => {
        const errorDiv = document.getElementById("error-" + input.id);
        if (input.value.trim() === "") {
          if (errorDiv) errorDiv.textContent = "Thông tin bắt buộc";
          valid = false;
        } else {
          if (errorDiv) errorDiv.textContent = "";
        }
      });
      if (valid) alert("Đăng ký thành công!");
    });
  </script>
</body>
</html>
